!function(){var e={892:function(){},296:function(){},531:function(){},277:function(){},881:function(){},955:function(e,t,i){var s=i(892);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,i(534).A)("2720b45e",s,!0,{})},995:function(e,t,i){var s=i(296);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,i(534).A)("73d98873",s,!0,{})},718:function(e,t,i){var s=i(531);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,i(534).A)("36e9d11b",s,!0,{})},488:function(e,t,i){var s=i(277);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,i(534).A)("cec6ac78",s,!0,{})},492:function(e,t,i){var s=i(881);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,i(534).A)("682c0ce0",s,!0,{})},534:function(e,t,i){"use strict";function s(e,t){for(var i=[],s={},n=0;n<t.length;n++){var o=t[n],a=o[0],l={id:e+":"+n,css:o[1],media:o[2],sourceMap:o[3]};s[a]?s[a].parts.push(l):i.push(s[a]={id:a,parts:[l]})}return i}i.d(t,{A:function(){return g}});var n,o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},l=o&&(document.head||document.getElementsByTagName("head")[0]),r=null,p=0,m=!1,c=function(){},d=null,h="data-vue-ssr-id",u="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(e,t,i,n){m=i,d=n||{};var o=s(e,t);return f(o),function(t){for(var i=[],n=0;n<o.length;n++){var l=a[o[n].id];l.refs--,i.push(l)}t?f(o=s(e,t)):o=[];for(var n=0;n<i.length;n++){var l=i[n];if(0===l.refs){for(var r=0;r<l.parts.length;r++)l.parts[r]();delete a[l.id]}}}}function f(e){for(var t=0;t<e.length;t++){var i=e[t],s=a[i.id];if(s){s.refs++;for(var n=0;n<s.parts.length;n++)s.parts[n](i.parts[n]);for(;n<i.parts.length;n++)s.parts.push(b(i.parts[n]));s.parts.length>i.parts.length&&(s.parts.length=i.parts.length)}else{for(var o=[],n=0;n<i.parts.length;n++)o.push(b(i.parts[n]));a[i.id]={id:i.id,refs:1,parts:o}}}}function v(){var e=document.createElement("style");return e.type="text/css",l.appendChild(e),e}function b(e){var t,i,s=document.querySelector("style["+h+'~="'+e.id+'"]');if(s){if(m)return c;s.parentNode.removeChild(s)}if(u){var n=p++;t=_.bind(null,s=r||(r=v()),n,!1),i=_.bind(null,s,n,!0)}else t=y.bind(null,s=v()),i=function(){s.parentNode.removeChild(s)};return t(e),function(s){s?(s.css!==e.css||s.media!==e.media||s.sourceMap!==e.sourceMap)&&t(e=s):i()}}var w=(n=[],function(e,t){return n[e]=t,n.filter(Boolean).join("\n")});function _(e,t,i,s){var n=i?"":s.css;if(e.styleSheet)e.styleSheet.cssText=w(t,n);else{var o=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function y(e,t){var i=t.css,s=t.media,n=t.sourceMap;if(s&&e.setAttribute("media",s),d.ssrId&&e.setAttribute(h,t.id),n&&(i+="\n/*# sourceURL="+n.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={id:s,exports:{}};return e[s](o,o.exports,i),o.exports}i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="bundles/shoppableimage/",window?.__sw__?.assetPath&&(i.p=window.__sw__.assetPath+"/bundles/shoppableimage/"),function(){"use strict";i(955);let{Component:e}=Shopware;e.register("sw-cms-block-shoppable-image",{template:'{% block sw_cms_block_shoppable_image %}\r\n<div class="sw-cms-block-shoppable-image">\r\n    {# Ten slot o nazwie \'content\' jest miejscem, gdzie Shopware umie≈õci nasz element #}\r\n    <slot name="content">\r\n        <div class="sw-cms-block__missing-element-indicator"></div>\r\n    </slot>\r\n</div>\r\n{% endblock %}'}),i(995);let{Component:t}=Shopware;t.register("sw-cms-preview-shoppable-image",{template:'{% block sw_cms_block_preview_shoppable_image %}\r\n<div class="sw-cms-preview-shoppable-image">\r\n    <sw-icon name="regular-image-text" size="32"></sw-icon>\r\n</div>\r\n{% endblock %}'}),Shopware.Service("cmsService").registerCmsBlock({name:"shoppable-image",label:"sw-cms.blocks.custom.shoppableImage.label",category:"custom",component:"sw-cms-block-shoppable-image",previewComponent:"sw-cms-preview-shoppable-image",defaultConfig:{marginBottom:"20px",marginTop:"20px",marginLeft:"20px",marginRight:"20px",sizingMode:"full_width"},slots:{content:{type:"shoppable-image"}}}),i(718);let{Component:s}=Shopware;s.register("sw-cms-el-shoppable-image",{template:'{% block sw_cms_element_shoppable_image %}\r\n<div class="sw-cms-el-shoppable-image">\r\n    {% block sw_cms_element_shoppable_image_media_wrapper %}\r\n    <div class="sw-cms-el-shoppable-image__media-wrapper">\r\n        {% block sw_cms_element_shoppable_image_media %}\r\n        <img v-if="element.data.media" :src="element.data.media.url" alt="Shoppable Image" class="sw-cms-el-shoppable-image__media" style="width: 100%; height: auto; display: block;" ref="image"/>\r\n        <div v-for="(hotspot, index) in hotspots"\r\n             :key="index"\r\n             class="sw-cms-el-shoppable-image__hotspot"\r\n             :style="getHotspotPosition(hotspot)">\r\n        </div>\r\n        {% endblock %}\r\n\r\n        {% block sw_cms_element_shoppable_image_placeholder %}\r\n        <div v-if="!element.data.media" class="sw-cms-el-shoppable-image__placeholder">\r\n            <sw-icon name="regular-image" :size="48"></sw-icon>\r\n            <p>{{ $tc(\'sw-cms.elements.shoppableImage.placeholderText\') }}</p>\r\n        </div>\r\n        {% endblock %}\r\n    </div>\r\n    {% endblock %}\r\n</div>\r\n{% endblock %}',mixins:["cms-element"],inject:["repositoryFactory"],props:{element:{type:Object,required:!0}},data(){return{}},computed:{mediaRepository(){return this.repositoryFactory.create("media")},mediaWrapperStyles(){return{"min-height":this.element.config.minHeight?.value||"200px"}},mediaStyles(){return{"background-image":this.element.data.media?.url?`url("${this.element.data.media.url}")`:"none","background-size":this.element.config.backgroundSize?.value||"cover"}},hotspots(){return this.element.data.media?.url&&this.element.config.hotspots?.value||[]}},watch:{"element.config.media.value":{handler(e){if(!e){this.$set(this.element.data,"media",null);return}this.updateMediaItem(e)},immediate:!0}},created(){this.initElementConfig("shoppable-image"),this.initElementData("shoppable-image")},methods:{async updateMediaItem(e){if(e)try{let t=await this.mediaRepository.get(e,Shopware.Context.api);this.$set(this.element.data,"media",t)}catch(e){this.$set(this.element.data,"media",null)}},getHotspotPosition(e){return{top:`${e.positionY}%`,left:`${e.positionX}%`}}}}),i(488);let{Component:n,Mixin:o,Utils:a}=Shopware;n.register("sw-cms-el-config-shoppable-image",{template:'{% block sw_cms_element_shoppable_image_config %}\n<div class="sw-cms-el-config-shoppable-image">\n    <sw-media-field\n        :value="element.config.media.value"\n        @update:value="onMediaInput"\n        :allow-multi-select="false"\n    />\n\n    <div class="shoppable-image-editor" v-if="element.config.media.value">\n        <div class="shoppable-image-editor__image-wrapper" ref="imageWrapper" @click="onImageClick">\n            <img v-if="previewSource" :src="previewSource.url" alt="Shoppable Image Preview" style="max-width: 100%; height: auto; display: block; margin: 0 auto;"/>\n            <div v-for="(hotspot, index) in element.config.hotspots.value"\n                 :key="hotspot.id"\n                 class="shoppable-image-editor__hotspot"\n                 :style="{ left: hotspot.positionX + \'%\', top: hotspot.positionY + \'%\' }">\n                <sw-icon name="regular-circle" size="16px"></sw-icon>\n            </div>\n        </div>\n\n        <div class="shoppable-image-editor__hotspots-list">\n            <div v-for="(hotspot, index) in element.config.hotspots.value" :key="hotspot.id" class="hotspot-config">\n                <label>Hotspot {{ index + 1 }}</label>\n                <sw-entity-single-select\n                    :key="hotspot.id"\n                    :value="hotspot.productId"\n                    @update:value="onHotspotProductChange($event, hotspot.id)"\n                    entity="product"\n                    label="Associated Product">\n                </sw-entity-single-select>\n                <sw-button-group>\n                    <sw-button size="small" @click="removeHotspot(hotspot.id)">\n                        <sw-icon name="regular-trash"></sw-icon>\n                    </sw-button>\n                </sw-button-group>\n            </div>\n        </div>\n    </div>\n</div>\n{% endblock %}',mixins:["cms-element"],inject:["repositoryFactory"],data(){return{isLoading:!1}},computed:{mediaRepository(){return this.repositoryFactory.create("media")},previewSource(){return this.element.data&&this.element.data.media?this.element.data.media:null},uploadTag(){return`cms-element-media-config-${this.element.id}`}},created(){this.createdComponent()},methods:{createdComponent(){this.initElementConfig("shoppable-image"),this.initElementData("shoppable-image"),this.element.config.hotspots.value||this.$set(this.element.config.hotspots,"value",[])},onMediaInput(e){this.element.data||this.$set(this.element,"data",{}),this.$set(this.element.config.media,"value",e),this.$emit("element-update",this.element)},onImageRemove(){this.element.data||this.$set(this.element,"data",{}),this.element.config.media.value=null,this.element.config.hotspots.value=[],this.$set(this.element.data,"media",null),this.$emit("element-update",this.element)},onImageClick(e){let t=this.$refs.imageWrapper;if(!t)return;let i=(e.clientX-t.getBoundingClientRect().left)/t.offsetWidth*100,s=(e.clientY-t.getBoundingClientRect().top)/t.offsetHeight*100;this.element.config.hotspots.value||this.$set(this.element.config.hotspots,"value",[]),this.element.config.hotspots.value.push({id:a.createId(),productId:null,positionX:i.toFixed(2),positionY:s.toFixed(2)}),this.$emit("element-update",this.element)},removeHotspot(e){let t=this.element.config.hotspots.value.findIndex(t=>t.id===e);t>-1&&(this.element.config.hotspots.value.splice(t,1),this.$emit("element-update",this.element))},onHotspotProductChange(e,t){let i=this.element.config.hotspots.value.find(e=>e.id===t);i&&(this.$set(i,"productId",e),this.$emit("element-update",this.element))}}}),i(492);let{Component:l}=Shopware;l.register("sw-cms-el-preview-shoppable-image",{template:'{% block sw_cms_element_shoppable_image_preview %}\r\n<div class="sw-cms-el-preview-shoppable-image">\r\n    <sw-icon name="regular-image-text" size="24"></sw-icon>\r\n    <span>{{ $tc(\'sw-cms.elements.shoppableImage.label\') }}</span>\r\n</div>\r\n{% endblock %}'}),Shopware.Service("cmsService").registerCmsElement({name:"shoppable-image",label:"Shoppable Image Element",component:"sw-cms-el-shoppable-image",configComponent:"sw-cms-el-config-shoppable-image",previewComponent:"sw-cms-el-preview-shoppable-image",defaultConfig:{media:{source:"static",value:null,required:!0,entity:{name:"media"}},hotspots:{source:"static",value:[]},minHeight:{source:"static",value:"340px"}}})}()}();